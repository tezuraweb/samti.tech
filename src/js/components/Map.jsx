import React, { useState, useEffect } from 'react';


const Map = () => {

    const [institutionsData, setInstitutionsData] = useState([]);
    const [hoveredRegion, setHoveredRegion] = useState(null);
    const [selectedRegion, setSelectedRegion] = useState(null);
    const [regionInstitutions, setRegionInstitutions] = useState([]);
    const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });
    const [tooltipContent, setTooltipContent] = useState('');

    useEffect(() => {
        fetch('/api/institutions')
            .then(response => response.json())
            .then(data => {
                if (Array.isArray(data)) {
                    setInstitutionsData(data);
                } else if (data && Array.isArray(data.data)) {
                    setInstitutionsData(data.data);
                } else {
                    console.error('Invalid data format:', data);
                }
            })
            .catch(error => console.error('Error fetching data:', error));
    }, []);

    const handleRegionHover = (event, regionOrCityId, name) => {
        let institutionsInArea;

        if (regionOrCityId === 'region') {
            institutionsInArea = institutionsData.filter(inst => inst.region === name);
            const cities = [...new Set(institutionsInArea.map(inst => inst.city_id))];
            const schools = institutionsInArea.filter(inst => inst.institution_type.toLowerCase() === 'school').length;
            const colleges = institutionsInArea.filter(inst => inst.institution_type.toLowerCase() === 'college').length;

            const tooltipDiv = document.createElement('div');
            tooltipDiv.innerHTML = `
                <div class="tooltip-title">${name.toUpperCase()}</div>
                <div class="tooltip-content">
                    Cities: ${cities.length}
                    Schools: ${schools}
                    Colleges: ${colleges}
                    Total: ${institutionsInArea.length}
                </div>
            `;
            setTooltipContent(tooltipDiv.innerHTML);
        } else if (regionOrCityId === 'city') {
            institutionsInArea = institutionsData.filter(inst => inst.city_id === name);
            const schools = institutionsInArea.filter(inst => inst.institution_type.toLowerCase() === 'school').length;
            const colleges = institutionsInArea.filter(inst => inst.institution_type.toLowerCase() === 'college').length;

            const tooltipDiv = document.createElement('div');
            tooltipDiv.innerHTML = `
                <div class="tooltip-title">${name.toUpperCase()}</div>
                <div class="tooltip-content">
                    Schools: ${schools}
                    Colleges: ${colleges}
                    Total: ${institutionsInArea.length}
                </div>
            `;
            setTooltipContent(tooltipDiv.innerHTML);
        }

        setTooltipPosition({ x: event.pageX, y: event.pageY });
    };


    const handleRegionLeave = () => {
        setHoveredRegion(null);
        setTooltipContent('');
    };

    const handleRegionClick = (regionOrCityId, name) => {
        if (regionOrCityId === 'region') {
            const institutionsInArea = institutionsData.filter(inst => inst.region === name);
            setRegionInstitutions(institutionsInArea);
        }
        else if (regionOrCityId === 'city') {
            const institutionsInArea = institutionsData.filter(inst => inst.city_id === name);
            setRegionInstitutions(institutionsInArea);
        }

        setSelectedRegion(name);
    };

    useEffect(() => {
        const regionPaths = document.querySelectorAll('svg path[data-id][id]');

        regionPaths.forEach(path => {
            const regionOrCityId = path.getAttribute('data-id');
            path.classList.add('region');

            path.addEventListener('mouseenter', (e) => handleRegionHover(e, regionOrCityId, path.id));
            path.addEventListener('mouseleave', handleRegionLeave);
            path.addEventListener('click', () => handleRegionClick(regionOrCityId, path.id));
        });

        return () => {
            regionPaths.forEach(path => {
                path.removeEventListener('mouseenter', handleRegionHover);
                path.removeEventListener('mouseleave', handleRegionLeave);
                path.removeEventListener('click', handleRegionClick);
            });
        };
    }, [institutionsData]);

    return (
        <div className="interactive-map-container">
            <div className="map-container">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 500 360"
                    className="tajikistan-map"
                >
                    <g id="gorno-badahshan-group">
                        <path id="gorno-badahshan" data-id="region" d="M203.2 208.139L206.1 205.636L206.7 204.885L207.05 204.234L207.3 203.282L207.75 202.381L208.6 201.53L210.5 199.978L211.15 199.227L212.2 197.474L212.3 196.523L212.05 195.622L211.4 194.821L209.65 193.519L209.4 193.068L209.6 192.768L211.15 192.117L212.2 191.516L215.4 188.712L216.3 188.111L218.65 187.31L219.55 186.86L220.35 186.559L221.05 186.709L221.8 187.711L222.4 189.513L222.65 189.864L223.2 189.914L224.95 189.663L226.8 189.814L227.7 189.713L228.35 189.513L230.3 188.011L233.15 186.759L234.35 186.509L235.55 186.409L236.3 186.659L236.65 187.11L236.6 187.961L236.5 188.662L236.55 189.313L236.8 190.014L238.65 193.419L238.9 194.47L238.65 196.022L238.7 196.823L238.65 197.675L238.4 198.526L237.85 199.677V200.579L238.35 201.33L240.1 201.88L242.65 201.73L244.7 201.179L245.6 201.079L246.3 201.229L247.05 201.73L247.7 202.581L248.05 203.733L248.2 205.185L248.5 206.236L249.05 207.038L250.65 208.189L251.75 209.741L252.1 210.142L252.5 210.342L253.15 210.292L254.1 209.992L255.6 208.99L256.6 208.439L257.6 208.289L258.45 208.54L259.2 209.04L259.8 209.741L260.5 210.943L260.8 211.143L261.05 210.993L261.2 210.492L261.45 209.791L261.7 209.241L262.6 208.189L263.05 207.839L263.85 207.638L265.65 207.688L266.15 207.538L266.65 207.138L266.85 206.437V204.434L267 203.783L267.3 203.382L268.05 203.082L268.6 202.732L269.05 202.131L269.45 201.179L269.7 200.829L270.1 200.378L270.75 199.427L271.15 199.026L271.7 198.826L272.75 198.726L273.6 198.876L274.5 198.826L275.25 198.676L277.9 197.775H278.3L278.65 197.925L279.2 198.325L279.4 198.476L279.7 198.376L280.05 198.075L280.45 197.324L280.8 196.573L281.25 196.172L282.15 195.922L283.1 195.522L283.8 194.871L284.5 194.07L285.3 193.419L286.9 192.918L287.8 192.768L290.7 192.618L291.65 192.267L292.7 191.666L294.35 190.164L295.15 189.313L296.2 187.611L297.85 186.259L296.2 184.406L295.55 183.305L294.85 181.552L294.65 180.501L294.7 179.499L294.95 178.748L295.1 177.096L295.8 175.093L297.6 173.04L300.9 169.786L301.35 168.985L301.5 168.334L301.4 167.733L301.35 166.882L301.5 165.981L301.85 165.43L302.45 164.929L303.85 164.128L305.85 163.327L306.65 162.826L307.05 162.225L307.25 161.524L307.3 159.321L307.45 158.12L307.55 157.619L308.2 157.569L308.5 156.918L309 155.866L310.6 152.312L311.95 148.256L312.65 147.104L313.7 146.754L314.95 146.554L317.15 145.452L318.15 145.402L319.65 145.803L320.05 145.903L321.05 145.953L322 145.803L323.85 143.85L324.45 143.599L325.35 143.85L326.8 144.801H327.05H327.75L328.45 144.401L329.55 142.999L329.75 142.798L330.15 142.448L331 142.197L331.15 142.147L332.15 142.197L332.75 142.398L333.05 142.448L333.6 142.598L336.75 143.449L341.75 144.751L342.9 145.051H343.25L343.8 145.001L346.3 144.451L346.7 144.501L347.5 144.551L349.35 144.951L350.55 145.202L351.15 145.352L352.15 145.702L353.05 145.602L354 145.102L355.9 144.1L356.65 143.95L357 144.05L357.35 144.15L358.4 144.651L360.45 145.252L361.6 145.152L362.3 145.102L367.1 143.449L368.1 143.099L368.2 143.049L369.65 142.798L369.8 142.748L371.55 142.448L371.95 141.647L372.05 140.595L372.5 139.444L373.95 138.442L375.25 138.092L376.6 137.791L378.4 137.341L380.3 136.84L382.35 136.64L383.7 136.79L386.05 137.04L387.4 137.191H387.5L387.75 137.241L389.4 138.092L389.35 139.544L389.95 143.85L390.05 145.402L389.9 146.453L389.45 146.754L388.3 147.505L387.8 148.656L387.7 148.957L387.4 149.908L386.95 151.01L386.05 151.561L385.75 151.661L385.4 151.811L385 152.362L385.05 152.662L385.1 153.013V153.063L385.7 153.413L386.7 154.014L387.05 153.964L387.45 153.864L387.65 153.914L387.6 154.114L387.95 156.267L389.3 158.72L391.8 161.124L392.3 162.175L392.85 164.779L393.2 165.981L393.85 166.932L395.25 168.033L395.6 168.584L395.9 169.586L396.6 169.936L396.75 169.886L397.4 169.836L397.45 169.786L399.25 171.739L400.05 172.339L400.65 173.591L400.85 174.843L400.55 175.994L399.7 176.946L398.75 177.246L398.5 177.146L395.9 177.096L395.7 177.346H395.65L394.3 177.997L393.5 178.848L392.65 180.05L392.2 181.402L392.35 182.754L393.05 183.855L394.75 185.758L395.4 186.86L395.6 188.312L395.2 191.566L395.45 192.718L397.5 196.273L397.9 197.324L398.45 200.428L399 201.63L400.1 202.832L401.1 203.483L403.2 204.334L404.2 204.885L406 206.537L406.9 207.088L409.2 207.138L409.55 207.238H409.6L409.75 207.188L412.5 207.238L413.45 207.038L413.6 206.837L413.8 206.887L414.8 206.987L415.5 206.287L414.8 205.285V205.085L414.75 204.935L414.9 204.184L414.95 204.083L415.5 203.332V203.132L416.8 201.38L417.35 200.328V200.178V199.727L417.2 198.826L417.3 198.025L418.05 196.974L418.6 196.723H418.75L419.05 196.673L422.55 197.925L423.7 198.125L425 198.075L425.8 197.825L425.95 197.875L427.55 198.175L428 198.125L428.25 198.075L430.85 197.675L431.1 197.775H431.6L432.1 197.725L438.6 200.929L448.45 204.734L449.5 205.636L450.4 206.687L451.4 207.488L452.7 207.688L454.05 207.588L455.1 207.789L456.05 208.49L456.95 209.741H457L457.5 210.592L457.95 210.943L458.95 211.544L459.35 211.994L459.5 212.645L459.6 213.346L460 215.449V216.901L459.65 218.303L459 219.505L458.75 219.755H458.65L458.2 220.356L458.1 220.506L456.65 221.307L456.75 222.008L456.5 222.259L455.95 223.46L455.75 224.812V231.922L456.9 240.434L458 242.537L462.1 244.84L462.85 246.893L462.6 251.599L462.75 253.552L462.7 254.053L462.9 254.453L463.55 254.854L464.05 255.305L463.95 255.805L462.95 257.407L462.5 257.658L462.3 258.008L462.45 259.01L462.75 259.561L463.15 259.961L466.15 261.613L466.85 262.314L467.05 263.666L466.85 264.367L466.45 265.118L465.5 266.37L465.1 267.071L464.95 267.722L464.85 268.373L464.65 268.974L463.9 270.075L463.1 271.026L462.45 272.078L462.2 273.48L462.8 276.083L464.15 278.186L465.9 279.789L471.2 282.893L472.2 283.844L475.15 287.75L476.8 289.352L477.25 289.702L476.9 291.154L476.95 291.255L475.8 291.605L474.45 292.306L473.75 293.558L473.6 296.312L473.1 297.163L472.85 297.263L471.75 297.363H471.7H471.65L471.6 297.413L471 297.914L470.55 298.114L468.95 298.715H467.15L465.75 299.766L465.5 299.917L465.1 300.267L464.1 301.118L464.05 301.769V301.919L463.8 302.52L463.3 302.72L463.15 302.771L462.7 302.821L462.65 302.921V303.021L461.1 302.12L458.4 297.563L456.75 295.761L449.3 291.154L447.6 292.106L441.7 292.506H441.2L440.7 292.406L438.6 291.755L437.3 291.204L436.2 291.305L435.2 291.505L433.5 291.204H432.85L432.25 291.004L431.4 289.552L430.85 289.202L430.2 289.252L429.5 289.702L429.2 288.751L428.5 290.704L427.1 290.904L425.4 290.453L423.85 290.503L422.9 291.455L422.8 294.008L421.75 295.26L420.3 295.861L413.85 297.163L409.45 298.765L408.2 299.065L404.95 300.618L402.45 300.868L401.25 301.218L399.05 303.321L398.2 303.522L397.3 303.271L396 303.171L395.4 303.371L394.45 304.122L393.85 304.172L393.45 303.872L392.6 302.72L392.15 302.27L390.95 302.22L388.5 302.971L387.6 302.42L387.3 300.868L388.05 299.416L389.3 298.364L390.5 297.914L392.75 297.663L393.6 297.263L394.6 296.412L395.6 295.26L395.95 294.209L396 291.104L396.05 290.503L396.45 288.651L394.35 288.401L391.8 288.451L387.75 287.349L380.8 284.796L378.2 284.846L374.55 286.848L373.6 286.598L372.6 285.997L371.25 285.797L369.8 285.947L368.6 286.348L367.7 287.049L364.85 290.103L364.2 290.403L362.95 289.953L362.45 290.103L360.2 291.855L359.3 293.007L358.3 295.16L357.6 296.161L356.45 296.962L352.25 297.363L348.1 299.917L346.8 301.469L345.35 301.969L342.65 302.47L340.3 303.922L338.55 306.325L335.85 311.983L333.45 315.839L333.05 317.241L332.55 317.942L323.85 319.243L321.9 320.245L317.9 319.494L315.25 320.045L309.35 322.448L307.05 324L306.5 324.651L305.65 325.953L305.1 326.503L303.1 327.655L301.6 329.357L284.7 341.975L282.4 342.926L279.55 343.477H276.7L274 342.876L271.55 341.574L269.6 339.522L268.8 338.22L268.15 336.868L267.7 335.366L267.3 332.011L266.75 330.559L263.4 325.152L262.9 323.85L262.75 322.248V319.243L262.55 318.392L261.5 316.84L261.15 316.039L261.05 315.138L261.15 310.732L261.65 307.727L261.95 306.626L262.35 305.925L262.15 304.172L264.3 300.467L264.35 298.414L264.7 297.513L264.85 295.961L264.75 292.857L264.3 290.053L264.5 289.001L265.15 287.349L265.7 284.395L264.9 278.487L265.15 275.232L265.35 274.832L266.05 273.88L266.35 273.229L266.5 272.478L266.8 270.225L267.45 267.922L267.55 267.171L267.4 266.37L266.9 264.818L266.8 264.117L267.25 262.815L269.4 261.413L270.35 260.111L270.55 258.759L270.6 257.007L270.5 255.405L270.35 254.503L270.75 254.003L269 251.8L267.25 250.598L265.15 250.448L258 252.901L256.95 253.702L255.8 254.353L254.55 253.802L252.35 252L251.75 251.95L251.3 252.05L251 251.9L250.75 250.949L250.85 250.147L251.4 248.495L251.8 246.592L253.55 243.338L254.35 240.284L255.4 238.181L255.8 236.028L256.85 232.823L257.15 231.121L256.8 227.816L255.4 225.613L253.4 224.312L248.6 222.259L245 218.503L242.75 216.851L241.15 216L240.4 215.85H239.7L239.25 216.1H238.8L238.2 215.599L237.85 214.999L237.35 213.647L237 213.046L236.4 212.395L235.8 211.844L235.15 211.444L234.4 211.243L233.05 211.293L232.6 211.844L232.8 213.547L232.2 214.298L230.8 213.947L228.4 212.796L227.7 212.896L227.4 213.196L227.15 213.547L226.75 213.747H226.25L225.3 213.396L224.8 213.296H222.95L222 213.497L221.6 214.047L220.85 215.299L217.45 215.65L216.4 216.35V216.851L217.55 217.752L217.05 218.604L215 220.156L214.45 220.456L213.15 220.406L212.6 220.707L212.35 221.357V222.108L212.4 222.86V223.51L211.6 226.064L211.05 226.364L210.25 226.565L209.55 226.965L209 228.818L207.25 232.172L205.75 236.278L205.05 237.53L204.45 238.131L202.45 238.982L201.85 239.433L199.25 242.136L196.65 245.641L196.15 245.992L195.05 246.592H195L194.05 245.291L193.65 244.69L193.6 243.839L194.2 242.287L196.65 237.93L197.4 235.777L197.5 234.876L197.55 230.771L197.4 228.618L197.25 227.416V226.915L197.3 226.264L197.75 224.462L198.4 222.759L198.55 222.159V221.458L198.35 220.206L198.1 219.555L197.9 219.054L197.5 218.453L197.35 217.903V217.051L197.55 215.399L198.35 213.597L202.35 210.192L203 209.191L203.2 208.139Z" fill="2273FC" stroke="white" stroke-width="0.78225" stroke-linejoin="round" />
                        <path id="horog" data-id="city" opacity="0.8" d="M268.32 290.235C271.772 290.235 274.57 287.433 274.57 283.976C274.57 280.52 271.772 277.717 268.32 277.717C264.868 277.717 262.07 280.52 262.07 283.976C262.07 287.433 264.868 290.235 268.32 290.235Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                    </g>
                    <g id="halton-group">
                        <path id="hatlon" data-id="region" d="M74.9 250.698L74.95 250.748L76.5 251.95L77.1 252.651L77.95 253.352L79.4 253.502L83.85 252.801L84.9 252.501L85.15 252.701L85.4 252.951L85.55 253.302L85.75 253.552L86.05 253.652H86.4L87.5 253.352L87.9 253.102L88.2 252.651L89.15 249.246L89.7 247.744L90.5 246.643L92.3 245.791L92.6 245.541L92.75 245.04L92.9 243.638V241.936L93.15 240.584L93.05 240.234L92.75 239.983L91.85 239.733L91.5 239.533L91.3 239.282V238.882L91.4 238.481L92.3 236.579L94.8 232.523L94.95 232.072L95.1 231.622L95.2 230.72L95.25 229.819L95.15 228.618L95.05 227.866L94.3 225.363L94.25 224.962L94.4 224.562L94.6 224.161L95.5 223.06L96.55 222.108L97 221.958H97.55L99.65 222.609L101.65 222.96H102.1L102.65 222.86L103.45 222.459L103.9 222.159L104.2 221.808L104.85 220.807L105.15 220.556L105.5 220.406L105.95 220.306L106.5 220.256L107.05 220.406L107.4 220.606L108.35 222.108L108.95 222.209L111.15 221.658L111.55 221.508L111.95 221.207L112.4 220.606L112.7 220.156L113.45 218.554L113.65 218.253L113.9 217.953L115.1 217.302L119 215.85L126.95 215.349L129.65 214.097L129.9 214.047H130.25L130.7 214.147L131.15 214.298L131.6 214.648L131.9 214.949L132.15 215.249L132.55 215.8L132.7 216.2L132.75 216.401L132.95 217.752L137.7 217.953L138.25 218.203L138.85 218.554V218.954L138.75 219.305L138.55 219.605L137.95 220.156L137.75 220.506L137.65 221.007L137.95 221.808L138.3 222.159L138.85 222.409L139.5 222.359L140.55 222.459L141.15 222.309L141.55 222.108L142.2 221.608L142.95 220.707L144.1 219.655L145.15 218.503L145.5 217.853L145.75 217.552L146.05 217.302L146.3 217.001L146.85 216.05L147.15 215.8L148.25 215.149L148.45 214.949L148.95 214.448L149.15 214.147L150.55 213.196L152.1 212.245L154.7 209.791L155.25 208.89L160.55 200.929L160.9 200.629L161.3 200.478L162.1 200.579L162.5 200.679L162.85 200.829L163.1 201.079L163.5 201.68L163.7 201.981L163.9 202.281L164.25 202.481L164.75 202.531L165.8 202.231L166.35 201.93L166.7 201.58L168.85 197.675L172.35 193.969L172.9 193.519L173.2 193.319L175.95 192.267L176.85 191.816L177.65 191.766L178.7 192.067L179.55 192.567L180.05 193.068L180.5 193.669L182.55 195.672L183.3 196.723L184.6 198.125L186.1 198.976L187 199.477L187.4 200.579L187.35 201.58L187 203.232L186.8 205.035L186.95 205.686L187.2 205.886L187.45 205.636L189.1 203.633L190.7 202.081L191 201.88L191.45 201.68L192.05 201.58L194.75 201.68L198.2 201.33L198.6 201.48L198.9 201.73L199.05 201.981L199.35 202.331L201.75 204.134L202 204.434L202.2 204.734L202.35 205.035L202.6 205.736L202.9 206.987L203.2 208.139L203 209.191L202.35 210.192L198.35 213.597L197.55 215.399L197.35 217.051V217.903L197.5 218.453L197.9 219.054L198.1 219.555L198.35 220.206L198.55 221.458V222.159L198.4 222.759L197.75 224.462L197.3 226.264L197.25 226.915V227.416L197.4 228.618L197.55 230.771L197.5 234.876L197.4 235.777L196.65 237.93L194.2 242.287L193.6 243.839L193.65 244.69L194.05 245.291L195 246.592H195.05L194.75 246.743L194.45 247.143L194.15 247.794L193.5 248.095L192.85 248.195L192.45 248.445L192.25 249.096L192.2 249.747L192.4 250.348L192.85 250.949L191.5 251.449L190.15 251.7L188.85 251.449L187.65 250.448L187 252.35L187.25 254.604L188.05 256.757L189.05 258.309L189.7 258.609L191.65 259.21L192.05 259.861L192.2 260.912L192.6 261.864L193.1 262.665L193.65 263.165L193.35 264.017L193.45 265.068L194.05 267.171L194.15 268.273L194 268.923L193.8 269.524L193.65 270.426L192.95 271.527L192.65 271.727L192.4 271.978L192.45 272.579L192.5 273.229L192.45 273.73L192.1 274.281L191.95 274.431L191.65 274.732L191.5 274.681L190.35 274.732H190.25L189.4 276.885L189.25 277.535L188.85 277.786L186.85 280.339L185.15 280.99L183.4 280.69L181.65 280.039L180.05 279.789L180.45 280.339L178.6 279.989L178.05 279.789L177.85 279.588L177.55 279.288L177.3 278.787L177 278.437L176.25 278.287L175.05 277.836L174.4 276.784L173.85 275.583L172.9 274.732L171.5 274.681L169.1 275.933L167.9 276.234L167.3 276.534L166.7 277.035L166.1 277.385L165.5 277.035L165.05 276.734L163.75 276.334L163.3 276.234L161.85 276.434L159.4 277.535L158.1 277.786L150.15 277.035L149 277.535L148 280.64L146.7 281.892L144.15 283.794L143.9 284.145L143.55 285.046L143.35 285.396L142.9 285.797L142.05 286.398L141.75 286.798L141.4 288L141.25 289.352L141.3 292.156L141.45 292.406L141.95 292.556L142.15 292.857L142.1 293.257L142 293.408L141.85 293.458L141.75 293.658V294.309L141.85 295.01L142.05 295.661L142.35 296.161L142.85 297.263L143.2 299.766L143.7 300.417L143.25 302.07L144.2 302.52L145.3 302.72L145.1 303.672L143.1 307.076L142.15 307.978L139.8 309.48L138.85 310.581L138.2 311.182L137.55 311.433L137.35 311.483L136 311.783L134.85 312.334L133.65 312.434L128.15 308.679L127.85 308.579L126.55 307.677L126 307.076L124.95 304.473L123.9 303.572L122.6 302.67L121.4 301.619L120.55 298.965L119.65 297.663L118.45 296.562L117.3 295.911L113.35 295.41L113.15 295.36L112.8 295.26L112.65 295.51L112.95 296.362L113.3 296.862L114.25 297.563L114.55 297.914L114.75 298.965L114.45 299.616L113.8 299.766L112.95 299.416L112.15 298.364L111.65 297.163L111 296.261L109.75 295.911L108.5 296.362L108.25 297.163L108.95 299.416L109.1 300.968L108.85 301.669L108.15 301.619L106 300.217L105.3 299.866L104.55 299.816L103.35 299.917L101.1 299.616L100.05 299.666L99.35 300.417L99.65 300.718L99.85 301.068L100.15 301.919L98.85 302.17L98.15 303.221L97.8 304.373L97.6 304.924L96.55 305.124L94.35 305.775L93.2 305.925L92.9 306.275L92.1 307.677L91.6 307.978L90.95 308.028L88.2 308.679L84.6 308.929L85.4 310.682L85.05 311.733L83.9 312.334L82.35 312.484L81.2 312.234L80.1 311.783L78.95 311.683L77.85 312.484L77.4 313.686L77.45 315.188L77.85 318.242L77.25 319.293H75.85L73.45 318.492L71.9 318.693L70.85 319.594L69.9 320.545L68.8 321.046L68.1 321.497L64.25 324.801L63.65 325.202L62.95 325.502H62.5L62.2 325.452L61.7 325.102L61.4 324.501L61.15 323.9L60.8 323.249L58.8 320.796L58.3 320.295L56.9 319.594L56.3 319.043L55.35 317.541L54.75 316.239L53.95 315.338L51.3 314.687L49.85 313.936L48.55 312.985L47.8 311.983L47.75 310.882L48.25 306.225L48.5 305.124L49.6 302.971L50.3 300.467L50.6 297.814L50.4 294.759L49.25 288.951L49.45 285.847L51.1 281.341L53.55 276.985L56.6 273.129L59.7 270.125L63.95 264.167L65.7 260.812L68.15 253.252L69.2 252.2L71 251.549L73.75 251.199L74.65 250.898L74.9 250.698Z" fill="2273FC" stroke="white" stroke-width="0.78225" stroke-linejoin="round" />
                        <path id="kulob" data-id="city" opacity="0.8" d="M164.877 259.437C168.329 259.437 171.127 256.635 171.127 253.178C171.127 249.722 168.329 246.92 164.877 246.92C161.425 246.92 158.627 249.722 158.627 253.178C158.627 256.635 161.425 259.437 164.877 259.437Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="bohtar" data-id="city" opacity="0.8" d="M106.511 264.827C109.963 264.827 112.761 262.025 112.761 258.568C112.761 255.112 109.963 252.31 106.511 252.31C103.059 252.31 100.261 255.112 100.261 258.568C100.261 262.025 103.059 264.827 106.511 264.827Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="dangara" opacity="0.8" d="M138.82 245.614C142.272 245.614 145.07 242.812 145.07 239.355C145.07 235.899 142.272 233.097 138.82 233.097C135.369 233.097 132.57 235.899 132.57 239.355C132.57 242.812 135.369 245.614 138.82 245.614Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="levakant" opacity="0.8" d="M113.752 258.376C117.203 258.376 120.002 255.574 120.002 252.117C120.002 248.661 117.203 245.859 113.752 245.859C110.3 245.859 107.502 248.661 107.502 252.117C107.502 255.574 110.3 258.376 113.752 258.376Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                    </g>
                    <g id="republic-group">
                        <path id="republic" data-id="region" d="M70 179.399L71.55 178.999L74.45 178.949L75.5 178.648L78.75 177.296L79.7 177.096L80.45 177.046L80.85 177.196L82 177.747L82.5 177.897L82.85 177.847L83.4 177.647L83.8 177.446L85.9 176.595L87.55 176.695L88.7 176.395L90.75 175.544L91.4 174.843L92.25 173.191L94.1 171.889V171.839L94.2 171.538L94.7 169.485L95.05 168.584L95.45 168.284L95.9 168.134L99.85 168.334L105.4 166.181L106.2 166.081L106.5 166.281L106.65 166.581L106.8 166.932L107.25 167.182L107.9 167.332L111.45 167.082L114.75 167.382L118.4 168.334L118.75 168.534L119.65 168.734L119.85 168.885L121.3 169.185L123.15 169.586L124.95 168.784L125.35 168.434L125.6 168.134L126.35 167.533L130.6 165.179L131.95 164.579L132.95 164.278L138.6 164.478L139.55 164.428L140 164.128L140.2 163.727L140.35 160.974L140.4 160.523L140.6 159.922L140.95 159.371L141.75 158.67L142.3 158.42L142.8 158.32L143.3 158.37L147.65 157.769H148.3L148.5 157.919L150.55 159.822L151 160.423L151.25 161.074L151.4 161.875L151.45 162.726L151.4 163.627L151.05 164.979L151 165.43L151.05 165.83L151.25 166.131L151.6 166.431H151.9L152.2 166.281L152.45 166.031L152.95 165.43L153.5 165.029L154.35 164.629L156.35 164.028L157.05 163.627L157.3 163.227L157.2 162.876L157.15 162.476L157.1 162.175L157.15 161.624L158.45 160.473L158.7 160.122L159.05 159.622L159.25 159.071L159.5 158.22L159.8 155.115L159.65 154.515L159.5 154.114L158.75 153.313L158.4 152.912L158.2 152.161L162.25 149.808L162.8 149.708L163.45 149.658L163.9 150.659L164.3 151.26L164.65 151.561L165.1 151.811L165.95 152.061L166.45 152.011L166.85 151.911L167.5 151.611L168.1 151.21L168.65 150.709L169.3 149.758L169.9 148.656L170.2 148.256L170.7 147.855L171.15 147.705L177.05 146.904L177.65 146.954L177.85 147.555L178.05 147.955L178.55 148.306H178.9L179.25 148.156L179.45 147.855L179.95 147.405L180.65 146.904L182.25 146.303L183.15 146.153H183.8L184.1 146.403L184.3 146.704L184.35 147.104L184.4 148.006L184.45 148.406L184.6 148.807H184.9L185.15 148.656L186.3 147.755L192.5 144.751L192.8 144.501L193 144.2L193.4 143.249L193.85 142.698L194.3 142.448L194.7 142.398L195.1 142.448L195.4 142.648L195.9 143.199L196.2 143.399L196.75 143.549L199.1 143.449L205.2 141.647L205.9 141.597L206.25 141.296L206.5 140.996L206.9 140.045L207.05 139.744L207.35 139.594L210.55 139.143L211.35 138.893L211.85 138.592L212.05 138.242L212.35 137.391L212.55 137.04L212.8 136.74L213.75 136.189L215.85 134.587V134.637L216.5 135.188L217.85 135.739L218.4 136.289L218.75 137.341L218.6 138.342L218.35 139.344L218.3 140.295L219.2 141.847L220.75 142.798L222.5 143.099L224.1 142.848L225.05 142.298L225.9 141.847L226.6 141.647L227.5 141.597L227.7 141.647L228 141.697L228.45 141.497L229.2 140.695L229.25 140.645L230.3 140.145L231.55 140.745L232.1 141.096L233 141.697L234.6 142.147L236.45 141.146L236.65 140.796L237.55 139.093L238.4 136.59L239.6 134.487L241.5 133.235H241.65L243.25 132.784L243.95 132.584L246.4 132.434L248.15 132.784L249.75 133.085H250.45L251.1 132.634L251.8 131.783L252.95 130.481L253.75 129.83L255.6 128.879L255.75 128.729L255.95 128.629L256.2 128.428L257 127.527L257.4 127.277L257.95 127.026L259.65 126.726L261.65 125.825L262.7 125.675L263.5 126.175L264.65 126.876L265.65 127.727L265.7 127.828L266.55 128.929L266.9 130.181L266.6 131.282L265.1 133.485L264.6 134.637L265.8 137.291L268.25 138.392L271.05 138.542L272.65 138.192L272.75 138.242L272.9 138.192L273.05 138.142H273.15H273.3H273.45L273.6 138.092H273.75H273.9L273.95 138.042L274.15 137.992L274.25 137.942L274.55 137.892H274.8H275L275.2 137.841L275.4 137.892H275.5L275.7 137.841L275.9 137.741L276 137.641L276.15 137.491V137.441H276.25L276.4 137.491H276.55L276.6 137.441L276.7 137.491H276.85L276.9 137.541L277 137.491L277.15 137.341H277.2L277.4 137.291L277.65 137.391L277.85 137.491L278 137.591H278.1L278.2 137.541L278.3 137.391H278.35L279.05 138.092L279.6 139.794L279.75 141.747L279.55 143.299L278.85 144.401L278.1 145.202L277.5 146.153L277.35 147.705L277.8 149.207L278.65 150.409L279.7 151.21L280.85 151.561L282.6 151.36L282.65 151.46L282.7 151.36H282.95L285.1 150.409L285.55 150.058L285.65 150.159L285.8 150.259L285.9 150.409L286.05 150.259L286.3 150.209L286.65 150.259L286.95 150.309H287.1L287.5 150.259L287.8 150.309L288 150.359L288.25 150.409H288.45H288.55L288.65 150.259L288.75 150.159L288.95 150.008L289.15 149.858L289.35 149.808L289.55 149.708L289.75 149.658L289.95 149.458L290 149.307V148.757V148.306L290.05 148.156V148.056L290 147.955L290.15 147.855L290.3 147.755L290.45 147.705H290.65L290.8 147.755L291.05 147.855V147.805V147.655L291.1 147.355L291.2 147.255L291.3 146.954L291.45 146.804L291.6 146.704H291.65L291.7 146.554L291.75 146.403L291.8 146.303H291.85L292 146.253L292.2 146.303H292.4H292.55L292.75 146.353L292.85 146.303L292.95 146.203V146.053V145.803L293 145.602L294 145.352L294.3 145.202L294.5 145.252L294.75 145.302L294.95 145.402L295.1 145.452L295.3 145.302L295.6 145.202L295.9 144.951L296.25 144.601L296.4 144.35L296.55 144.2L296.95 144.1L297.1 144.3L297.2 144.401L297.45 144.451L297.7 144.751L298 145.051L298.2 145.202V145.302V145.552L298.1 145.903L298.25 146.153L298.35 146.403V146.453L298.3 146.704L298.25 146.804L298.5 147.154L298.75 147.505L298.9 147.655V147.805V147.955L298.8 148.156L298.6 148.306V148.406L298.55 148.606V148.807L298.7 149.107L298.8 149.307V149.508L298.75 149.608L298.8 149.758L299 150.108L299.2 150.359L299.25 150.609L299.3 150.809L299.45 150.96L299.6 151.16L299.75 151.31L299.95 151.36L300.1 151.46L300.25 151.761H300.35H300.5L300.75 151.661L300.8 151.611L300.95 151.711L303.45 152.111L303.95 152.412L304.8 153.063V153.113L304.9 153.313L304.95 153.513V153.713L305 153.764L305.1 153.663H305.3H305.55L305.75 153.613L305.85 153.663L306 153.713L306.05 153.814H306.1L306.25 154.214V154.815L306.4 155.516L306.6 155.967V156.167L306.65 156.668L306.7 157.018L306.85 157.369L306.9 157.619L307 157.819L307.35 158.019L307.45 158.12L307.3 159.321L307.25 161.524L307.05 162.225L306.65 162.826L305.85 163.327L303.85 164.128L302.45 164.929L301.85 165.43L301.5 165.981L301.35 166.882L301.4 167.733L301.5 168.334L301.35 168.985L300.9 169.786L297.6 173.04L295.8 175.093L295.1 177.096L294.95 178.748L294.7 179.499L294.65 180.501L294.85 181.552L295.55 183.305L296.2 184.406L297.85 186.259L296.2 187.611L295.15 189.313L294.35 190.164L292.7 191.666L291.65 192.267L290.7 192.618L287.8 192.768L286.9 192.918L285.3 193.419L284.5 194.07L283.8 194.871L283.1 195.522L282.15 195.922L281.25 196.172L280.8 196.573L280.45 197.324L280.05 198.075L279.7 198.376L279.4 198.476L279.2 198.325L278.65 197.925L278.3 197.775H277.9L275.25 198.676L274.5 198.826L273.6 198.876L272.75 198.726L271.7 198.826L271.15 199.026L270.75 199.427L270.1 200.378L269.7 200.829L269.45 201.179L269.05 202.131L268.6 202.732L268.05 203.082L267.3 203.382L267 203.783L266.85 204.434V206.437L266.65 207.138L266.15 207.538L265.65 207.688L263.85 207.638L263.05 207.839L262.6 208.189L261.7 209.241L261.45 209.791L261.2 210.492L261.05 210.993L260.8 211.143L260.5 210.943L259.8 209.741L259.2 209.04L258.45 208.54L257.6 208.289L256.6 208.439L255.6 208.99L254.1 209.992L253.15 210.292L252.5 210.342L252.1 210.142L251.75 209.741L250.65 208.189L249.05 207.038L248.5 206.236L248.2 205.185L248.05 203.733L247.7 202.581L247.05 201.73L246.3 201.229L245.6 201.079L244.7 201.179L242.65 201.73L240.1 201.88L238.35 201.33L237.85 200.579V199.677L238.4 198.526L238.65 197.675L238.7 196.823L238.65 196.022L238.9 194.47L238.65 193.419L236.8 190.014L236.55 189.313L236.5 188.662L236.6 187.961L236.65 187.11L236.3 186.659L235.55 186.409L234.35 186.509L233.15 186.759L230.3 188.011L228.35 189.513L227.7 189.713L226.8 189.814L224.95 189.663L223.2 189.914L222.65 189.864L222.4 189.513L221.8 187.711L221.05 186.709L220.35 186.559L219.55 186.86L218.65 187.31L216.3 188.111L215.4 188.712L212.2 191.516L211.15 192.117L209.6 192.768L209.4 193.068L209.65 193.519L211.4 194.821L212.05 195.622L212.3 196.523L212.2 197.474L211.15 199.227L210.5 199.978L208.6 201.53L207.75 202.381L207.3 203.282L207.05 204.234L206.7 204.885L206.1 205.636L203.2 208.139L202.9 206.987L202.6 205.736L202.35 205.035L202.2 204.734L202 204.434L201.75 204.134L199.35 202.331L199.05 201.981L198.9 201.73L198.6 201.48L198.2 201.33L194.75 201.68L192.05 201.58L191.45 201.68L191 201.88L190.7 202.081L189.1 203.633L187.45 205.636L187.2 205.886L186.95 205.686L186.8 205.035L187 203.232L187.35 201.58L187.4 200.579L187 199.477L186.1 198.976L184.6 198.125L183.3 196.723L182.55 195.672L180.5 193.669L180.05 193.068L179.55 192.567L178.7 192.067L177.65 191.766L176.85 191.816L175.95 192.267L173.2 193.318L172.9 193.519L172.35 193.969L168.85 197.675L166.7 201.58L166.35 201.93L165.8 202.231L164.75 202.531L164.25 202.481L163.9 202.281L163.7 201.981L163.5 201.68L163.1 201.079L162.85 200.829L162.5 200.679L162.1 200.579L161.3 200.478L160.9 200.629L160.55 200.929L155.25 208.89L154.7 209.791L152.1 212.245L150.55 213.196L149.15 214.147L148.95 214.448L148.45 214.949L148.25 215.149L147.15 215.8L146.85 216.05L146.3 217.001L146.05 217.302L145.75 217.552L145.5 217.853L145.15 218.503L144.1 219.655L142.95 220.707L142.2 221.608L141.55 222.108L141.15 222.309L140.55 222.459L139.5 222.359L138.85 222.409L138.3 222.159L137.95 221.808L137.65 221.007L137.75 220.506L137.95 220.156L138.55 219.605L138.75 219.305L138.85 218.954V218.554L138.25 218.203L137.7 217.953L132.95 217.752L132.75 216.401L132.7 216.2L132.55 215.8L132.15 215.249L131.9 214.949L131.6 214.648L131.15 214.298L130.7 214.147L130.25 214.047H129.9L129.65 214.097L126.95 215.349L119 215.85L115.1 217.302L113.9 217.953L113.65 218.253L113.45 218.554L112.7 220.156L112.4 220.606L111.95 221.207L111.55 221.508L111.15 221.658L108.95 222.209L108.35 222.108L107.4 220.606L107.05 220.406L106.5 220.256L105.95 220.306L105.5 220.406L105.15 220.556L104.85 220.807L104.2 221.808L103.9 222.159L103.45 222.459L102.65 222.86L102.1 222.96H101.65L99.65 222.609L97.55 221.958H97L96.55 222.108L95.5 223.06L94.6 224.161L94.4 224.562L94.25 224.962L94.3 225.363L95.05 227.866L95.15 228.618L95.25 229.819L95.2 230.72L95.1 231.622L94.95 232.072L94.8 232.523L92.3 236.579L91.4 238.481L91.3 238.882V239.282L91.5 239.533L91.85 239.733L92.75 239.983L93.05 240.234L93.15 240.584L92.9 241.936V243.638L92.75 245.04L92.6 245.541L92.3 245.791L90.5 246.643L89.7 247.744L89.15 249.246L88.2 252.651L87.9 253.102L87.5 253.352L86.4 253.652H86.05L85.75 253.552L85.55 253.302L85.4 252.951L85.15 252.701L84.9 252.501L83.85 252.801L79.4 253.502L77.95 253.352L77.1 252.651L76.5 251.95L74.95 250.748L74.9 250.698L75.55 250.248L76 249.296L76.25 248.195L76.7 246.893L77.4 245.491L79.65 241.986L81.1 237.88L82.05 233.574L81.8 230.67L80.4 228.417L75.75 224.261L72.75 222.559L71.75 221.558L69.6 217.602L67.3 215.399L66.75 214.348L66.55 213.246L66.45 210.893L66.1 209.741L64.7 207.588L64.25 206.587L64.1 204.935L64.3 200.679L64.15 199.127L63.4 196.373L63.25 194.971L63.7 193.869L65.15 192.818L65.45 192.367L65.5 191.516L65.25 190.815L64.9 190.164L64.75 189.413L64.95 187.761L65.6 187.36L66.6 187.41L68 187.11L68.95 186.509L69.85 185.758L70.6 184.707L71.1 183.455L71.15 181.803L70.6 180.3L70 179.399ZM107.7 202.431L107.5 201.28L107.1 200.178L106.5 199.127L106.1 197.975L105.6 197.474L105.4 198.025L105.3 199.076L105.55 200.478L105.2 201.33L103.7 202.081L102.4 202.481L102.2 203.182L102.75 204.484L101.25 205.586L101.6 205.986L102.9 205.435L103.3 206.287L102.9 207.188L103.5 208.089L103.4 209.191L103.55 210.793L104.65 211.594L105.75 211.494L106.85 211.243L106.95 210.492L106.85 209.241L108.45 207.789L110.2 207.088L110.55 206.086L111.25 205.035L110.25 204.784L109.9 203.833L108.85 203.583L108.25 203.282L108.35 202.381L107.7 202.431Z" fill="2273FC" stroke="white" stroke-width="0.78225" stroke-linejoin="round" />
                        <path id="vahdad" data-id="city" opacity="0.8" d="M120.108 211.344C123.56 211.344 126.358 208.542 126.358 205.086C126.358 201.629 123.56 198.827 120.108 198.827C116.656 198.827 113.858 201.629 113.858 205.086C113.858 208.542 116.656 211.344 120.108 211.344Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="rogun" data-id="city" opacity="0.8" d="M161.589 194.261C165.04 194.261 167.839 191.459 167.839 188.002C167.839 184.546 165.04 181.744 161.589 181.744C158.137 181.744 155.339 184.546 155.339 188.002C155.339 191.459 158.137 194.261 161.589 194.261Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="norak" data-id="city" opacity="0.8" d="M138.235 223.886C141.687 223.886 144.485 221.084 144.485 217.627C144.485 214.17 141.687 211.368 138.235 211.368C134.784 211.368 131.985 214.17 131.985 217.627C131.985 221.084 134.784 223.886 138.235 223.886Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                    </g>
                    <g id="leninabad-group">
                        <path id="leninabad" data-id="region" d="M210.6 18.025L212.2 18.726L213.55 19.9277L214.4 21.2796L215.15 23.1321L215.25 24.484L214.05 24.1836L213.1 23.2323L211.4 20.9291L210.4 19.9277L210.35 19.8776L209.7 18.2754L210.6 18.025ZM215.85 134.587L213.75 136.189L212.8 136.74L212.55 137.04L212.35 137.391L212.05 138.242L211.85 138.592L211.35 138.893L210.55 139.143L207.35 139.594L207.05 139.744L206.9 140.045L206.5 140.996L206.25 141.296L205.9 141.597L205.2 141.647L199.1 143.449L196.75 143.549L196.2 143.399L195.9 143.199L195.4 142.648L195.1 142.448L194.7 142.398L194.3 142.448L193.85 142.698L193.4 143.249L193 144.2L192.8 144.501L192.5 144.751L186.3 147.755L185.15 148.656L184.9 148.807H184.6L184.45 148.406L184.4 148.006L184.35 147.104L184.3 146.704L184.1 146.403L183.8 146.153H183.15L182.25 146.303L180.65 146.904L179.95 147.405L179.45 147.855L179.25 148.156L178.9 148.306H178.55L178.05 147.956L177.85 147.555L177.65 146.954L177.05 146.904L171.15 147.705L170.7 147.855L170.2 148.256L169.9 148.656L169.3 149.758L168.65 150.709L168.1 151.21L167.5 151.611L166.85 151.911L166.45 152.011L165.95 152.061L165.1 151.811L164.65 151.561L164.3 151.26L163.9 150.659L163.45 149.658L162.8 149.708L162.25 149.808L158.2 152.161L158.4 152.912L158.75 153.313L159.5 154.114L159.65 154.515L159.8 155.115L159.5 158.22L159.25 159.071L159.05 159.622L158.7 160.122L158.45 160.473L157.15 161.624L157.1 162.175L157.15 162.476L157.2 162.876L157.3 163.227L157.05 163.627L156.35 164.028L154.35 164.629L153.5 165.029L152.95 165.43L152.45 166.031L152.2 166.281L151.9 166.431H151.6L151.25 166.131L151.05 165.83L151 165.43L151.05 164.979L151.4 163.627L151.45 162.726L151.4 161.875L151.25 161.074L151 160.423L150.55 159.822L148.5 157.919L148.3 157.769H147.65L143.3 158.37L142.8 158.32L142.3 158.42L141.75 158.67L140.95 159.371L140.6 159.922L140.4 160.523L140.35 160.974L140.2 163.727L140 164.128L139.55 164.428L138.6 164.478L132.95 164.278L131.95 164.579L130.6 165.179L126.35 167.533L125.6 168.134L125.35 168.434L124.95 168.784L123.15 169.586L121.3 169.185L119.85 168.885L119.65 168.734L118.75 168.534L118.4 168.334L114.75 167.382L111.45 167.082L107.9 167.332L107.25 167.182L106.8 166.932L106.65 166.581L106.5 166.281L106.2 166.081L105.4 166.181L99.85 168.334L95.9 168.134L95.45 168.284L95.05 168.584L94.7 169.485L94.2 171.538L94.1 171.839V171.889L92.25 173.191L91.4 174.843L90.75 175.544L88.7 176.395L87.55 176.695L85.9 176.595L83.8 177.446L83.4 177.647L82.85 177.847L82.5 177.897L82 177.747L80.85 177.196L80.45 177.046L79.7 177.096L78.75 177.296L75.5 178.648L74.45 178.949L71.55 178.999L70 179.399L68.9 177.797L66.95 173.441L66.05 172.339H66L65.55 172.189L65.05 172.139L64.6 172.189L64.15 172.339L63.15 173.04L62.2 173.391L61.25 173.191L60.35 172.339L59.9 172.089L58.9 171.739H58.05L57.25 171.939L56.45 172.339L52 173.841L50.45 173.892L43 172.64L42 171.638L41.95 171.588L41.65 169.736L42.3 163.928L42.2 162.876L41.65 161.975L41.3 161.825L40.3 162.075L39.9 161.975L39.6 161.624L39.15 160.773L38.9 160.473L36.6 159.572L31.85 159.371L24.8 156.868L23.15 155.316L22.75 152.362L22.85 151.26L22.95 150.759L23.2 150.409L23.65 150.008L23.75 149.908L24.4 149.708L24.9 149.858L25.3 149.708L25.75 147.204L26.5 144.701L26.55 141.897L26.95 138.843L27.65 135.939L28.2 135.238L29.1 135.138L30.6 135.338L30.85 135.288L31.15 135.138L31.4 134.937L31.6 134.637L31.2 131.282L32.35 130.181L37 129.43L42.4 125.524L44.6 124.823L47.3 124.873L67.25 130.081L75.95 130.331L80.7 132.083L83.6 132.284L86.45 131.983L90.05 131.032L91.2 130.531V130.481L90.8 129.53L90.6 129.079L91.35 127.928L93.85 126.325L95.25 124.873L96.05 123.371L96.35 121.519L96.95 109.302L97.55 107.65L98.2 107.7L98.35 107.8L99 108.05L101 106.248L101.95 106.999L103.5 109.552L104.25 109.953L104.65 109.452L104.8 108.701V108.3V108.2L105.2 107.049L105.4 106.949L106 106.848L106.25 106.698L106.95 105.246V104.145L105.65 101.341L105.1 99.7385L104.9 98.2865L105.3 97.6857L106.5 98.5369L107.7 101.14L108.55 104.445L109.9 106.498L112.4 105.497L112.2 103.794L107.05 96.6843L106.75 95.9333L106.7 95.1822L106.8 93.6301L106.6 93.0292L105.55 92.2281L105.45 91.5271L106.2 90.1252L107.1 90.8762L108.45 93.2295L109.2 93.0292L111.25 91.1766L112.45 90.8262L116.7 91.4771L118 91.2768L118.5 90.3255L118.6 89.2239L118.4 88.0723L118 86.9708L115.3 85.0181L101.65 87.6718L101.1 87.822L99.05 87.0209L96.4 85.3686L94.9 83.6662L96.15 82.815L98.5 82.2142L101.75 81.363L103.05 81.2128L106.4 81.8136L107.8 81.6134L109.8 80.4618L110.95 79.9611L120.45 78.5091L121.8 78.7093L123.65 79.6607L125.65 80.662L130.85 82.2643L133.75 82.3644L135.95 81.363V79.5104L131.7 75.7052L131.5 73.452L133 73.2517L135.25 74.1029L137.15 73.8025L137.55 70.0473L137.2 68.3449L136.55 66.8929L135.05 64.1391L134.5 62.7371L133.25 58.4312H133.2L130.9 54.4757V52.8734L133 51.4214L136.55 51.121L137.35 50.6203L137.6 49.5689L137.2 45.4631L137.25 42.6593L137.65 40.3561L138.55 38.3533L140.05 36.4006L140.85 35.6996L141.8 35.1989L143.7 34.548L144.75 34.6982L145.5 35.299L146.25 36.1001L147.15 36.6509L149 36.8512L150.35 38.1029L152.6 41.6579L153.3 42.2587L154.75 43.21L155.4 44.0111L156.5 45.8136L157.1 46.6648L157.8 47.3157L159.6 47.9666L161.15 47.516L162.55 46.2643L165 43.1599L166.15 42.1586L167.45 41.5077L178.2 38.153L183.7 33.847L189.75 31.4437L193.95 28.8901L197.2 25.0848L198.8 16.9235L201 16.3727L203.6 17.4242L204.35 18.2253L205.45 19.4771L205.6 19.7274L205.8 19.9277L207.6 21.58L218.25 33.6467L218.75 34.2976L218.6 35.7497L217.45 35.299L215.45 33.5466L214.3 33.6968L213.75 34.6481L213.85 36L214.8 37.1516L220.1 38.4033L222.35 39.7051L221.85 42.3088L221.7 42.9597L220.8 43.5605L220.6 43.8609L220.5 44.2114L220.3 44.5118L219.35 44.7622L218.85 44.9625L218 45.6634L217.15 46.4645L213.6 49.3686L211.55 51.9221L210.8 52.573L209.95 52.9736L209.05 53.2239L208.25 53.5744L207.45 54.3755L206.05 56.7789L205.5 57.58L204.9 57.7803L200.9 58.7316L199.2 59.8331L198.25 61.3352L198.35 62.9374L198.45 63.338L198.55 63.5382L199.3 64.6398L199.4 64.7399L199.9 65.3408L200.05 65.6912L199.3 68.3449L202.2 69.6467L203.4 69.9972L204.7 69.8971L205.8 69.5466L206.9 69.3964L208.2 69.9472L209.7 72.5007L210.5 76.0556L211.55 79.3102L213.9 81.0125L216.35 81.1627L218.85 80.9625L227.15 78.3588L232.35 77.9082L233.55 78.0084L234.5 79.5605L234.75 79.8609L233.75 81.7636L231.8 83.2156L230 83.8164L227.9 83.3157L226.9 83.1154L226.1 83.3658L226 83.516L225.7 83.7163L224.65 84.3171L224.6 84.1669L224.5 84.1168L224.4 84.0167L224.15 83.8665L223.8 83.9166L223.6 84.0668L223.25 84.5675L220.95 86.5202L220.15 87.0209L216.7 88.1725L216.45 88.2726L215 89.6746L214.9 89.7246L214.65 91.6773L214.7 93.7302V94.0306L214.55 94.8317L214.2 96.6843L213.7 97.5355L213.55 97.7858L213.4 98.0862L212.4 99.1377L211.25 99.8387L210 100.289L207.5 100.389L207.05 100.64L206.85 100.74L206.6 101.14L206.45 101.441L205.95 103.093L205.45 103.744L204.2 103.293L203.75 102.292L203.9 100.99L204.45 99.5383L205.2 98.4868L206.1 97.8359L207.05 97.3352L208 96.6843L208.85 94.9819L208.25 93.6301L206.9 92.7288L205.45 92.2281L200.8 91.5271L198.6 90.5758L196.55 90.3255L195.5 89.7747L194.55 88.7232L193.8 87.6718L193 86.7205L192.9 86.6704L191.7 86.0695L190.35 85.9694L189.5 86.0195L187.45 86.1697L186.2 85.7691L177.9 80.2615L175.85 80.0612L160.6 85.5689L156.45 87.0209L154.5 87.7218L153.05 88.2726L152.9 88.3227L152.3 88.4228L151.9 88.4729L151 88.3727L150.6 87.9722L150 86.8206L149.55 86.6704L149.25 87.0209L149 88.3227L148.85 88.8234L147.65 90.5758L146.7 92.3282L146.35 94.281L146.8 96.6843L147.05 97.1349L147.15 97.6356L147.2 98.1363L147.15 98.637L148.3 100.74L148.5 101.09V101.191V101.291L148.55 101.441V101.591V102.142L142.95 104.145L140.15 99.2879L139.45 98.5369L138.45 97.3853L137.65 97.2351L137.45 97.3853L137.4 97.8359L137.15 98.5869L136.05 101.09L133.35 109.252L132.7 112.156L132.55 115.16L132.95 116.562L133.8 117.563L134.85 118.414L135.65 119.466L136.1 120.718L136.3 122.17L136 131.182L136.85 132.985L139.15 132.033L139.5 131.483V131.433L139.65 130.932L139.85 130.431L140.4 130.181L140.75 130.381L141.65 131.382L142.15 131.883L143.35 132.284L145.4 131.933H145.5L145.85 131.883H147.15L147.3 131.833L147.95 131.783L148.25 131.733L149.3 131.332L150.25 130.732H150.3L152.25 129.029L153.3 128.629H153.4L158.35 128.278L160.75 128.579L163.05 129.33L165.5 130.732L167.75 131.433L169.15 131.132L170.95 130.782L172.25 130.531L174.65 130.782L176.4 131.583L176.9 131.182L177.1 130.882L177.8 129.88L178.8 128.979L180 128.629H181.25L181.85 128.779L182.45 128.879L184.4 130.031L185.35 130.381L186.3 130.081L186.55 129.68L186.8 129.33L188.4 125.825L189.3 125.124L189.9 125.875L190.15 127.277V128.328V128.579L189.55 131.282L189.65 132.334L190.65 132.734L191.7 132.484L192.8 131.683L196.9 128.629L197.65 128.378L198.25 128.428L198.4 128.478L199.45 128.829H200.05L200.4 128.579L200.7 128.178L200.85 127.978L201.05 127.777L201.6 127.577L202.55 127.377L202.75 127.277L203.8 126.876L204.45 126.626L205.45 126.526L205.6 126.576L206.25 126.826L207.55 128.028L208.3 128.478L209.3 128.579L211.45 128.178L212.5 128.278L213.9 129.38L214.7 130.982L215.85 134.587ZM208.25 105.747L213.75 107.599L215.8 107.65L217.65 106.798L218.35 106.999L218.8 108.401V108.801L218.7 109.752L218.1 110.303L216.2 110.704L215.25 111.154L214.55 111.555L212.5 113.157L211.55 113.958L211.2 113.708L209.55 110.854L208.95 110.103L207 108.751L206.2 107.599L205.75 106.348L205.85 105.196H206.7L207.05 105.346L207.25 105.396L208.25 105.747Z" fill="2273FC" stroke="white" stroke-width="0.78225" stroke-linejoin="round" />
                        <path id="hudzhand" data-id="city" opacity="0.8" d="M155.276 80.8098C158.728 80.8098 161.526 78.0077 161.526 74.5511C161.526 71.0946 158.728 68.2924 155.276 68.2924C151.824 68.2924 149.026 71.0946 149.026 74.5511C149.026 78.0077 151.824 80.8098 155.276 80.8098Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="konibodom" data-id="city" opacity="0.8" d="M201.918 80.8055C205.369 80.8055 208.168 78.0034 208.168 74.5468C208.168 71.0902 205.369 68.2881 201.918 68.2881C198.466 68.2881 195.668 71.0902 195.668 74.5468C195.668 78.0034 198.466 80.8055 201.918 80.8055Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="panzhakent" data-id="city" opacity="0.8" d="M38.2451 140.781C41.6968 140.781 44.4951 137.979 44.4951 134.523C44.4951 131.066 41.6968 128.264 38.2451 128.264C34.7933 128.264 31.9951 131.066 31.9951 134.523C31.9951 137.979 34.7933 140.781 38.2451 140.781Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="istaravshan" data-id="city" opacity="0.8" d="M119.516 108.985C122.967 108.985 125.766 106.183 125.766 102.726C125.766 99.2694 122.967 96.4673 119.516 96.4673C116.064 96.4673 113.266 99.2694 113.266 102.726C113.266 106.183 116.064 108.985 119.516 108.985Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="isfara" data-id="city" opacity="0.8" d="M214.547 93.5391C217.999 93.5391 220.797 90.737 220.797 87.2804C220.797 83.8238 217.999 81.0217 214.547 81.0217C211.095 81.0217 208.297 83.8238 208.297 87.2804C208.297 90.737 211.095 93.5391 214.547 93.5391Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="guliston" data-id="city" opacity="0.8" d="M141.668 80.8111C145.12 80.8111 147.918 78.009 147.918 74.5524C147.918 71.0958 145.12 68.2937 141.668 68.2937C138.216 68.2937 135.418 71.0958 135.418 74.5524C135.418 78.009 138.216 80.8111 141.668 80.8111Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="buston" data-id="city" opacity="0.8" d="M138.751 62.4261C142.203 62.4261 145.001 59.624 145.001 56.1674C145.001 52.7108 142.203 49.9087 138.751 49.9087C135.299 49.9087 132.501 52.7108 132.501 56.1674C132.501 59.624 135.299 62.4261 138.751 62.4261Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                    </g>
                    <g id="dushanbe-group">
                        <path id="dushanbe-region" data-id="region" d="M107.7 202.431L108.35 202.381L108.25 203.282L108.85 203.583L109.9 203.833L110.25 204.784L111.25 205.035L110.55 206.086L110.2 207.088L108.45 207.789L106.85 209.241L106.95 210.492L106.85 211.243L105.75 211.494L104.65 211.594L103.55 210.793L103.4 209.191L103.5 208.089L102.9 207.188L103.3 206.287L102.9 205.435L101.6 205.986L101.25 205.586L102.75 204.484L102.2 203.182L102.4 202.481L103.7 202.081L105.2 201.33L105.55 200.478L105.3 199.077L105.4 198.025L105.6 197.474L106.1 197.975L106.5 199.127L107.1 200.178L107.5 201.28L107.7 202.431Z" fill="2273FC" stroke="white" stroke-width="0.78225" stroke-linejoin="round" />
                        <path id="dushanbe" data-id="city" opacity="0.8" d="M106.15 211.069C109.602 211.069 112.4 208.267 112.4 204.811C112.4 201.354 109.602 198.552 106.15 198.552C102.698 198.552 99.8998 201.354 99.8998 204.811C99.8998 208.267 102.698 211.069 106.15 211.069Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                        <path id="tursunzade" data-id="city" opacity="0.8" d="M106.454 212.876C109.906 212.876 112.704 210.074 112.704 206.617C112.704 203.161 109.906 200.358 106.454 200.358C103.002 200.358 100.204 203.161 100.204 206.617C100.204 210.074 103.002 212.876 106.454 212.876Z" fill="FF0067" stroke="white" stroke-width="0.8344" />
                    </g>
                </svg>

                {tooltipContent && (
                    <div
                        className="tooltip"
                        style={{ top: tooltipPosition.y + 20, left: tooltipPosition.x + 20 }}
                    >
                        {tooltipContent}
                    </div>
                )}
            </div>

            {selectedRegion && (
                <div className="region-institutions">
                    <h2>Institutions in {selectedRegion.toUpperCase()}</h2>
                    <table className="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Institution Name</th>
                                <th>Type</th>
                                <th>Address</th>
                                <th>Director</th>
                                <th>Contact</th>
                            </tr>
                        </thead>
                        <tbody>
                            {regionInstitutions.map(inst => (
                                <tr key={inst.id}>
                                    <td>{inst.id}</td>
                                    <td>{inst.institution_name}</td>
                                    <td>{inst.institution_type}</td>
                                    <td>{inst.legal_address}</td>
                                    <td>{inst.name_1} ({inst.position_1})</td>
                                    <td>
                                        {inst.work_phone_1 && `Work: ${inst.work_phone_1}`}<br />
                                        {inst.mobile_phone_1 && `Mobile: ${inst.mobile_phone_1}`}<br />
                                        {inst.email_1 && `Email: ${inst.email_1}`}
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            )}

        </div>
    );
};

export default Map;
